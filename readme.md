# ğŸš€ E-Commerce Performance Engineering: End-to-End Observability

![k6](https://img.shields.io/badge/k6-0.54.0-7D64FF?logo=k6&logoColor=white)
![JMeter](https://img.shields.io/badge/Apache%20JMeter-5.5-D22128?logo=apachejmeter&logoColor=white)
![Grafana](https://img.shields.io/badge/Grafana-10.0-F46800?logo=grafana&logoColor=white)
![InfluxDB](https://img.shields.io/badge/InfluxDB-1.8-22ADF6?logo=influxdb&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-Compose-2496ED?logo=docker&logoColor=white)

## ğŸ¯ Overview

This repository hosts a robust **Performance Engineering Suite** designed to simulate high-load user journeys on a .NET-based e-commerce platform ([Tricentis Demo Web Shop](https://demowebshop.tricentis.com/)).

Going beyond simple script execution, this project implements a full **Infrastructure as Code (IaC)** observability pipeline. It automatically provisions databases, data sources, and real-time dashboards to monitor the health of the application under stress.

---

## ğŸ—ï¸ Architecture & Features

The solution follows a modern "Performance as Code" approach:

* **Hybrid Load Generation:** * **Legacy/Standard:** Apache JMeter for protocol-heavy, thread-based simulation.
    * **Modern/DevOps:** k6 (TypeScript) for lightweight, developer-friendly load testing.
* **Real-Time Observability:**
    * **InfluxDB:** Time-series database storing metrics from both tools.
    * **Grafana:** Pre-provisioned dashboards (Infrastructure as Code) for immediate analysis.
* **Engineering Logic:**
    * **Dynamic Correlation:** Handling Anti-CSRF tokens and Session Cookies automatically.
    * **Resilient Checkout:** Full "One Page Checkout" flow simulation (Billing -> Shipping -> Payment -> Order).
    * **Automated Provisioning:** Docker volumes and initialization scripts ensure the environment is "Plug & Play".

---

## ğŸ“‚ Project Structure

```text
performance-challenge-accenture/
â”œâ”€â”€ docker-compose.yml              # ğŸ³ Orchestration (The brain)
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ grafana/
â”‚   â”‚   â”œâ”€â”€ provisioning/           # âš™ï¸ Auto-configures Data Sources
â”‚   â”‚   â””â”€â”€ dashboards/             # ğŸ“Š JSON Dashboards (JMeter & k6)
â”‚   â”œâ”€â”€ influxdb-init/              # ğŸ—„ï¸ Auto-creates databases on startup
â”‚   â”œâ”€â”€ jmeter/
â”‚   â”‚   â””â”€â”€ Demo-Shop-Performance-Test.jmx  # JMeter Plan with Backend Listener
â”‚   â””â”€â”€ k6/
â”‚       â”œâ”€â”€ src/                    #  TS Source Code
â”‚       â””â”€â”€ dist/                   # Compiled JS (Generated by Webpack)
â””â”€â”€ results/                        # Local artifacts (ignored by git)
````

-----

## ğŸš€ Quick Start (Docker)

No local installation of Java, Go, or Node.js is required. Docker Compose handles the entire stack.

### 1ï¸âƒ£ Start the Infrastructure

Start the Database and Dashboard services first.
*(Wait \~10 seconds for Grafana to provision the dashboards)*.

```bash
docker compose up -d influxdb grafana
```

### 2ï¸âƒ£ Run the Tests (Choose your weapon)

**Option A: Run k6 (Modern)**
Executes the TypeScript-based script compiled via Webpack.

```bash
docker compose up k6
```

**Option B: Run JMeter (Classic)**
Executes the JMeter plan in non-GUI mode with auto-cleanup.

```bash
docker compose up jmeter
```

### 3ï¸âƒ£ Analyze Results (Real-Time)

Open your browser to **[http://localhost:3000](https://www.google.com/search?q=http://localhost:3000)**.

  * **No login required.**
  * **Dashboards are pre-loaded.**
  * Navigate to **Dashboards** folder to see live metrics for JMeter or k6.

-----

## ğŸ§¹ Resetting the Environment

Since InfluxDB retains data in Docker volumes, you might want to clean up old test data to start fresh.

```bash
# Stops containers and REMOVES volumes (Database reset)
docker compose down -v
```

-----

## ğŸ§  Technical Details

### k6 Implementation (TypeScript)

The k6 implementation mimics a modern software project structure:

  * **Webpack:** Bundles imports and modules (like `utils/extraction.ts`) into a single file k6 can understand.
  * **Extraction Logic:** Uses regex and HTML parsing to handle dynamic IDs and CSRF tokens resiliently.
  * **Config:** `webpack.config.js` ensures compatibility between Node modules and the k6 runtime.

![Grafana k6](https://i.imgur.com/EP6NYiT.png)

### JMeter Implementation

  * **Backend Listener:** Configured to stream metrics asynchronously to InfluxDB.
  * **Auto-Cleanup:** The Docker entrypoint automatically cleans old `.jtl` and HTML reports to prevent data pollution between runs.

![Grafana Jmeter](https://i.imgur.com/9vqB53F.png)

-----

*Author: Luis Fernando Richter*
